<Document>
  # Поток реагентов
  Понимание того, как реагенты движутся по водопроводным сетям, является ключом к созданию эффективных фабрик.

  ## Сети
  [color=#a4885c]Водопроводная сеть[/color] — это группа машин и каналов, соединенных вместе через их соединители. Реагенты могут течь только между машинами в [bold]одной и той же[/bold] сети.

  Каждый [color=#ff5959]входной[/color] соединитель на машине формирует свою собственную [bold]независимую сеть[/bold]. Это означает, что если у машины несколько входных соединителей, каждый из них подключается к отдельной сети. Трубы, присоединенные к разным входам на одной и той же машине, [bold]не соединяются[/bold].

  [color=#5999ff]Выходные[/color] соединители, с другой стороны, [bold]делят[/bold] одну сеть. Бак с тремя выходными соединителями объединяет все три в одну сеть, поэтому любая машина, забирающая реагенты с любой из этих сторон, видит один и тот же пул реагентов. Это можно использовать для экономии места и упрощения схем.

  ## Поток на основе вытягивания
  Водопровод использует модель [color=#a4885c]на основе вытягивания[/color], реагенты не текут сами по себе. Машина с входом [bold]активно вытягивает[/bold] реагенты из выходов других машин в той же сети. Если ничего не вытягивается, ничего не движется.

  Это означает:
  - [color=#a4885c]Вход[/color] сам по себе никуда не будет толкать реагенты. Другая машина должна вытягивать из него.
  - [color=#a4885c]Синтезатор[/color] генерирует реагенты в свой буфер, но они остаются там, пока что-то их не вытянет.
  - [color=#a4885c]Бак[/color] вытягивает из своей входной сети и хранит реагенты. Затем другие машины вытягивают из выходной сети бака.

  ## Циклическое распределение
  Когда машина вытягивает реагенты и в одной сети есть [bold]несколько выходов[/bold] (например, два синтезатора, питающие бак), она использует циклическое распределение. Каждый тик обновления она начинает вытягивать из другого выхода, справедливо переключаясь между ними.

  ## Скорость передачи
  Каждая машина вытягивает фиксированное количество за тик обновления ([color=#a4885c]20u каждые 2 секунды[/color]). Этот бюджет передачи распределяется между всеми входами машины; машина с четырьмя входными соединителями все равно вытягивает всего 20u за тик, а не 20u на каждый вход.

  ## Реактор: Целевое вытягивание
  [color=#a4885c]Реактор[/color] особенный, он вытягивает [bold]определенные реагенты[/bold], а не все подряд. Он полностью заполняет каждый целевой реагент, прежде чем перейти к следующему. Если вы установите цели 30u железа и 20u углерода, он сначала вытянет все 30u железа, а затем начнет вытягивать углерод.

  ## Фильтр: Выборочная маршрутизация
  [color=#a4885c]Фильтр[/color] имеет один вход и два выхода. Он вытягивает все из входной сети в свой буфер, а затем, когда другие машины вытягивают из него, фильтр контролирует, какие реагенты доступны на каком выходе:
  - [bold]Отфильтрованный выход[/bold]: Предоставляет только те реагенты, которые вы выбрали.
  - [bold]Проходной выход[/bold]: Предоставляет только те реагенты, которые вы [italic]не[/italic] выбрали.

  ## Пресс для таблеток: Режим смешивания
  В [color=#a4885c]режиме смешивания[/color] пресс для таблеток игнорирует свой основной вход и вместо этого вытягивает из своих [color=#59e659]смесительных входов[/color]. Каждый смесительный вход вытягивает из своей отдельной сети в промежуточную область. Как только в обеих областях будет достаточно реагентов, они объединяются и прессуют таблетку в настроенном соотношении.

  ## Советы
  - Размещайте [color=#a4885c]Баки[/color] между производством и потреблением для буферизации реагентов и разделения предложения и спроса.
  - Используйте [color=#a4885c]вантуз[/color] для очистки застрявших реагентов из буфера любой машины.
  - Машины вытягивают только тогда, когда в их буфере есть место. Полный буфер прекращает вытягивание до тех пор, пока из него не будут вытянуты реагенты.
</Document>
